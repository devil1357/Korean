# 목차 
서문	
- Lakehouse	
    - 작업 1: SQL을 사용한 데이터 쿼리	
    - 작업 2: T-SQL 결과 시각화	
    - 작업 3: 시각적 쿼리 만들기	
    - 작업 4: 쿼리 결과 시각화	
    - 작업 5: 관계 만들기	1
    - 작업 6: 측정값 만들기	
    - 작업 7: 선택 섹션 – 관계 만들기	
    - 작업 8: 선택 섹션 – 측정값 만들기	
참조	

# 서문 

우리는 다양한 데이터 원본의 데이터를 Lakehouse로 수집했습니다. 본 랩에서는 데이터 모델을 사용합니다. 일반적으로 우리는 Power BI Desktop에서 관계 생성, 측정값 추가 등과 같은 모델링 활동을 수행했습니다. 여기서는 서비스에서 이러한 모델링 활동을 수행하는 방법을 알아봅니다.

이 랩을 마치면 다음 사항을 알게 됩니다.

- Lakehouse 탐색 방법
- Lakehouse의 SQL 보기 탐색 방법
- Lakehouse에서 데이터 모델링 탐색 방법

# Lakehouse

### 작업 1: SQL을 사용한 데이터 쿼리

1. 다시 랩 2, 작업 8에서 만든 Fabric 작업 영역 **FAIAD\<username\>**(으)로 되돌아가 보겠습니다.

2. **Data Factory 화면**으로 되돌아갑니다.

3. lh_FAIAD의 세 가지 유형(의미 체계 모델, SQL 엔드포인트 및 Lakehouse)을 보게 됩니다. 이전 랩에서 Lakehouse 옵션을 탐색했습니다. **lh_FAIAD SQL 분석 엔드포인트** 옵션을 선택하여 SQL 옵션을 탐색합니다. 탐색기의 **SQL 보기**로 이동합니다.

데이터 모델을 만들기 전에 데이터를 탐색하려면 SQL을 사용하면 됩니다. SQL을 사용하는 두 가지 옵션을 살펴보겠습니다. 첫 번째 옵션은 개발자 친화적이고 두 번째 옵션은 분석가를 위한 것입니다.

SQL을 사용하여 Supplier가 판매한 제품을 빠르게 찾고 싶다고 가정해 보겠습니다. SQL 문을 작성하거나 시각적 개체를 사용하여 SQL 문을 만드는 두 가지 옵션이 있습니다.

왼쪽 패널에서 테이블을 볼 수 있습니다. 테이블을 확장하면 테이블을 구성하는 열을 볼 수 있습니다. 또한 SQL 보기, 함수 및 저장 프로시저를 생성하는 옵션도 있습니다. SQL에 대한 배경 지식이 있다면 자유롭게 다음 옵션을 살펴보세요. 간단한 SQL 쿼리를 작성해 보겠습니다.

4. **상단 메뉴**에서 **새 SQL 쿼리**를 선택하거나, **왼쪽 패널 하단**에서 **쿼리**를 선택합니다. SQL 쿼리 보기로 이동합니다.

5.  **아래 SQL 쿼리**를 **쿼리 창**에 붙여넣습니다. 이 쿼리는 Supplier 이름별로 unit을 반환합니다. 이를 달성하기 위해 Sales 테이블을 Product 및 Supplier 테이블과 결합합니다.
    
```
SELECT su.Supplier_Name, SUM(Quantity) as Units
FROM dbo.Sales s
JOIN dbo.Product p on p.StockItemID = s.StockItemID
JOIN dbo.Supplier su on su.SupplierID = p.SupplierID
GROUP BY su.Supplier_Name
```

6. 결과를 보려면 **실행**을 클릭합니다.

7. **보기로 저장**을 선택하여 이 쿼리를 뷰로 저장할 수 있는 옵션이 있습니다.

8. **왼쪽** **탐색기** 패널의 **쿼리** 섹션에서 이 쿼리가 **내 쿼리** 아래에 **SQL query 1**으로 저장되어 있습니다. 이는 쿼리 이름을 바꾸고 나중에 사용할 수 있도록 저장하는 옵션을 제공합니다. **공유 쿼리** 폴더를 사용하여 나와 공유된 쿼리를 볼 수 있는 옵션도 있습니다.

### 작업 2: T-SQL 결과 시각화

1. 이 쿼리의 결과를 시각화할 수도 있습니다. 쿼리 창에서 **쿼리를 강조 표시하고** **결과 창**을 선택한 다음 **결과 시각화**를 선택합니다.

2. 결과 시각화 대화 상자가 열립니다. **계속**을 선택합니다.

3. 친숙한 보고서 보기 대화 상자가 열립니다. **데이터** 창에서 **SQL query 1**을 확장합니다.

4. **Supplier_Name** 및 **Units** **필드**를 선택합니다. 테이블 시각적 개체가 기본적으로 생성됩니다.

5. **시각화 섹션**에서 **누적 세로 막대형 차트**를 선택하여 시각적 개체 유형을 변경합니다.

6. 필요에 따라 시각적 개체의 **크기를 조정**합니다.
    
    **참고:** Power BI 보고서의 시각적 개체 형식을 지정하는 데 사용할 수 있는 모든 옵션도 여기에서 사용할 수 있습니다.

7. 오른쪽 하단에서 **보고서로 저장**을 선택합니다.

8. 보고서 저장 대화 상자가 열립니다. **보고서 텍스트 상자 이름 입력**에 **Units by Supplier**를 입력합니다.

9. 대상 작업 영역이 Fabric 작업 영역 **FAIAD\<username\>**(으)로 설정되어 있는지 확인합니다.

10. **저장**을 선택합니다.

### 작업 3: 시각적 쿼리 만들기

**SQL 분석 엔드포인트 뷰**로 이동합니다. SQL에 익숙하지 않은 경우 새 시각적 쿼리를 사용하여 유사한 쿼리를 실행할 수 있습니다.

1. 상단 메뉴에서 **새 시각적 쿼리**를 선택합니다. 시각적 쿼리 창이 열립니다.

2. **탐색기** 창에서 **Sales, Product 및 Supplier** 테이블을 시각적 쿼리 창으로 끌어 놓습니다.

3. **Sales** 테이블을 선택하고 시각적 쿼리 창 메뉴에서 **결합 -> 쿼리 병합**을 선택합니다.

4. 병합 대화 상자가 열립니다. **병합할 오른쪽 테이블** **드롭다운** 에서 **Product**을 선택합니다.

5. **Sales** 및 **Product** 테이블에서 **StockItemID**을 선택합니다. 이는 Product 테이블과 Sales 테이블을 병합하는 것입니다.

6. **결합 종류**에서 **왼쪽 우선 외부**를 선택합니다.

7. **확인**을 선택합니다.

8. **결과** 창에서 **Product** 열 옆에 있는 **이중 화살표**를 클릭합니다.

9. 대화 상자가 열리면 대화 상자에서 **SupplierID**를 선택합니다.

10. **확인**을 선택합니다. **병합된 쿼리** 및 **확장된 제품** 단계는 **Sales** 테이블에서 생성됩니다.

11. 마찬가지로, Supplier 테이블을 병합해 보겠습니다. **Sales** 테이블 내에서 **"+"**(확장된 제품 뒤에 위치)를 선택하여 새 단계를 추가합니다. 대화 상자가 열립니다.

12. **결합 -> 쿼리 병합**을 선택합니다.

13. 병합 대화 상자가 열립니다. **병합할 오른쪽 테이블** **드롭다운**에서 **Supplier**를 선택합니다.

14. **Sales** 및 **Supplier** 테이블에서 **SupplierID**를 선택합니다. 이는 Supplier 테이블과 Sales 테이블을 병합하는 것입니다.

15. **결합 종류**에서 **왼쪽 우선 외부**를 선택합니다.

16. **확인**을 선택합니다.

17. **결과** 창에서 **Supplier** 열 옆에 있는 **이중 화살표**를 클릭합니다.

18. 대화 상자가 열리면 대화 상자에서 **Supplier_Name**을 선택합니다.

19. **확인**을 선택합니다. Sales 테이블에서 **병합된 쿼리**가 추가되고 **모든 단계가 기록된** 것을 확인합니다.
    
    **참고:** 작업 4의 첫 번째 스크린샷을 참조하세요.

### 작업 4: 쿼리 결과 시각화

1. 이제 쿼리가 준비되었으므로 결과를 살펴보겠습니다. 결과 창에서 **결과 시각화**를 선택합니다.

2. 결과 시각화 대화 상자가 열립니다. 오른쪽의 **데이터** 창에서 **Supplier_Name** 및 **Quantity** 필드를 선택합니다.

3. 결과를 테이블로 보려면 시각적 개체 창에서 **테이블 시각적 개체**를 선택합니다. 결과는 이전의 SQL 쿼리 결과와 유사합니다. 원하는 경우 이 보고서를 저장할 수 있습니다. 앞서 유사한 보고서를 저장했으므로 **취소**를 선택하겠습니다.

### 작업 5: 관계 만들기

이제 모델을 구축하고, 테이블 간의 관계를 구축하고, 측정값을 생성할 준비가 되었습니다.

1. **왼쪽 패널의 하단에서** **모델**을 선택합니다. 가운데 창은 Power BI Desktop에서 볼 수 있는 모델 뷰와 비슷합니다.

2. 필요에 따라 테이블의 **크기를 조정하고 재배치**합니다.

3. Sales 테이블과 Reseller 테이블 간의 관계를 만들어 보겠습니다. **Sales** 테이블에서 **ResellerID**를 선택하여 **Reseller** 테이블의 **ResellerID**로 드래그합니다.

4. 새 관계 대화 상자가 열립니다. **Table 1이** **Sales**이고 **열**이 **ResellerID**인지 확인합니다.

5. **Table 2**가 **Reseller**이고 **열**이 **ResellerID**인지 확인합니다.

6. **카디널리티가 다대일(*:1)** 인지 확인합니다.

7. **교차 필터 방향**이 **단일**인지 확인합니다.

8. **확인**을 선택합니다.

9. 마찬가지로 Sales 테이블과 Date 테이블 간의 관계를 만듭니다. **Sales** 테이블에서 **InvoiceDate**를 선택하여 **Date** 테이블의 **Date**로 드래그합니다.

10. 새 관계 대화 상자가 열립니다. **Table 1이** **Sales**이고 **열**이 **InvoiceDate**인지 확인합니다.

11. **Table 2**가 **Date**이고 **열**이 **Date**인지 확인합니다.

12. **카디널리티가 다대일(*:1)** 인지 확인합니다.

13. **교차 필터 방향**이 **단일**인지 확인합니다.

14. **확인**을 선택합니다.

**체크포인트:** 현재 모델은 아래 스크린샷에 표시된 것처럼 Sales와 Reseller 테이블 간 및 Sales와 Date 테이블 간의 두 가지 관계가 있어야
합니다.

시간 관계상 모든 관계를 생성하지는 않습니다. 시간이 허락한다면 랩 마지막에 선택 섹션을 완료할 수 있습니다. 선택 섹션에서는 나머지 관계를 만드는 단계를 안내합니다.

### 작업 6: 측정값 만들기

매출 대시보드를 생성하는 데 필요한 몇 가지 측정값을 추가해 보겠습니다.

1. 모델 뷰에서 **Sales 테이블**을 선택합니다. Sales 테이블에 측정값을 추가하려고 합니다.

2. 상단 메뉴에서 **홈 - > 새 측정값**을 선택합니다. 수식 입력줄이 표시됩니다.

3. **수식 입력줄**에 **Sales = SUM(Sales[Sales_Amount])** 을 입력합니다.

4.  수식 입력줄 왼쪽의 **체크 표시** 를 클릭하거나 **Enter** 버튼을 클릭합니다.

5. 오른쪽 속성 패널에서 **서식** 섹션을 확장합니다.

6. **서식** 드롭다운 목록에서 **통화**를 선택합니다.

7. **소수점 자릿수**를 **0**으로 설정합니다.

8.  상단 메뉴에서 **Sales 테이블** 을 선택한 상태에서 **홈 -> 새 측정값**을 선택합니다. 수식 입력줄이 표시됩니다.

9.  **수식 입력줄**에 **Units = SUM(Sales[Quantity])** 을 입력합니다.

10. 수식 입력줄 왼쪽의 **체크 표시** 를 클릭하거나 **Enter** 버튼을 클릭합니다.

11. 오른쪽의 속성 패널에서 **서식 적용** 섹션을 확장합니다(속성 패널을 로드하는 데 몇 분 정도 걸릴 수 있습니다).

12. **서식** 드롭다운 목록에서 **정수**를 선택합니다.

13. **천단위 구분 기호**를 **예**로 설정합니다.

14. 상단 메뉴에서 **Sales 테이블** 을 선택한 상태에서 **홈 -> 새 측정값**을 선택합니다. 수식 입력줄이 표시됩니다.

15. **수식 입력줄**에 **Orders = DISTINCTCOUNT(Sales[InvoiceID])** 를 입력합니다.

16. 수식 입력줄 왼쪽의 **체크 표시** 를 클릭하거나 **Enter** 버튼을 클릭합니다.

17. 오른쪽 속성 패널에서 **서식** 섹션을 확장합니다.

18. **서식** 드롭다운 목록에서 **정수**를 선택합니다.

19. **천단위 구분 기호**를 **예**로 설정합니다.

다시 시간 관계상 모든 측정값을 생성하지는 않습니다. 시간이 허락한다면 랩 마지막에 선택 섹션을 완료할 수 있습니다. 선택 섹션에서는 나머지 측정값을 만드는 단계를 안내합니다.

데이터 모델을 만들었으니, 다음 단계는 보고서를 만드는 것입니다. 그 작업은 다음 랩에서 하도록 하겠습니다.

### 작업 7: 선택 섹션 -- 관계 만들기

나머지 관계를 추가해 보겠습니다.

1. **Sales**과 **Product** 테이블 사이에 **다대일** 관계를 만듭니다. **Sales** 테이블에서 **StockItemID**를 그리고 **Product** 테이블에서 **StockItemID**를 선택합니다.

2. 마찬가지로 **Sales**과 **People** 테이블 사이에 **다대일** 관계를 만듭니다. **Sales**에서 **SalespersonPersonID**를 그리고 **People**에서 **PersonID**를 선택합니다.

**체크포인트:** 현재 모델이 아래 스크린샷과 유사해야 합니다.

3. 이제 Product와 Supplier 간의 관계를 만들어 보겠습니다. **Product** 테이블에서 **SupplierID**를 선택하여 **Supplier** 테이블의 **SupplierID**로 드래그합니다.

4. 새 관계 대화 상자가 열립니다. **Table 1**이 **Product**이고 **열**이 **SupplierID**인지 확인합니다.

5. **Table 2**가 **Supplier**이고 **열**이 **SupplierID**인지 확인합니다.

6. **카디널리티가 다대일(*:1)** 인지 확인합니다.

7. **교차 필터 방향**이 **모두**인지 확인합니다.

8. **확인**을 선택합니다.

9. 마찬가지로 **Product_Details**과 **Product** 간의 교차 필터 방향을 **모두로** 설정한 **다대일** **관계**를 생성합니다.  **Product_Details**에서 **StockItemID**를 그리고 **Product**에서 **StockItemID**를 선택합니다.

10. 이제 Reseller과 Geo 간의 관계를 만들어 보겠습니다. **Reseller** 테이블에서 **PostalCityID**를 선택하여 **Geo** 테이블의 **CityID**로 드래그합니다.

11. 새 관계 대화 상자가 열립니다. **Table 1**이 **Reseller**이고 **열**이 **PostalCityID**인지 확인합니다.

12. **Table 2**가 **Geo**이고 **열**이 **CityID**인지 확인합니다.

13. **카디널리티가 다대일(*:1)** 인지 확인합니다.

14. **교차 필터 방향**이 **모두**인지 확인합니다.

15. **확인**을 선택합니다.

16. 이제 Customer와 Reseller 간의 관계를 만들어 보겠습니다. **Customer** 테이블에서 **ResellerID**를 선택하여 **Reseller** 테이블의 **ResellerID**로 드래그합니다.

17. 새 관계 대화 상자가 열립니다. **Table 1**이 **Customer**이고 **열**이 **ResellerID**인지 확인합니다.

18. **Table 2**가 **Reseller**이고 **열**이 **ResellerID**인지 확인합니다.

19. **카디널리티가 다대일(*:1)** 인지 확인합니다.

20. **교차 필터 방향**이 **Single**인지 확인합니다.

21. **확인**을 선택합니다.

**체크포인트:** 현재 모델이 아래 스크린샷과 유사해야 합니다.

22. 이제 PO와 Date 간의 관계를 만들어 보겠습니다. **PO** 테이블에서 **Order_Date**를 선택하여 **Date** 테이블의 **Date**로 드래그합니다.

23. 새 관계 대화 상자가 열립니다. **Table 1**이 **PO**이고 **열**이 **Order_Date**인지 확인합니다.

24. **Table 2**가 **Date**이고 **열**이 **Date**인지 확인합니다.

25. **카디널리티가 다대일(*:1)** 인지 확인합니다.

26. **교차 필터 방향**이 **단일**인지 확인합니다.

27. **확인**을 선택합니다.

28. 마찬가지로 **PO**와 **Product** 테이블 사이에 **다대일** 관계를 만듭니다. **PO**에서 **StockItemID**를 그리고 **Product**에서 **StockItemID**를 선택합니다.

29. 마찬가지로 **PO**와 **People** 테이블 사이에 **다대일** 관계를 만듭니다. **PO**에서 **ContactPersonID**를 그리고 **People**에서 **PersonID**를 선택합니다.

모든 관계의 생성이 완료되었습니다.

**체크포인트:** 현재 모델이 아래 스크린샷과 유사해야 합니다.

### 작업 8: 선택 섹션 -- 측정값 만들기

나머지 측정값을 추가해 보겠습니다.

1. 수식 입력줄에 **Avg Order = DIVIDE([Sales], [Orders])** 를 입력합니다.

2. 수식 입력줄의 **체크 표시**를 클릭하거나 Enter 버튼을 클릭합니다.

3. 측정값이 저장되면 상단 메뉴에서 측정 도구 옵션을 확인합니다. **측정 도구**를 클릭합니다.

4. 형식 드롭다운에서 **통화**를 클릭합니다.

5. 비슷한 단계에 따라 다음 측정값을 추가합니다.

    a. **GM = SUM(Sales[Line_Profit])** formatted as **Currency, Decimal places of 2**

    b. **GM% = DIVIDE([GM], [Sales])** formatted as **Percentage, Decimal places of 2**

    c. **No of Customers = COUNTROWS(Customer)** formatted as **Whole Number**

# 참조

Fabric Analyst in a Day(FAIAD)는 Microsoft Fabric에서 사용할 수 있는 몇 가지 주요 기능을 소개합니다. 서비스의 메뉴에 있는 도움말(?) 섹션에는 유용한 리소스로 연결되는 링크가 있습니다.

아래는 Microsoft Fabric의 다음 단계에 도움이 되는 몇 가지 추가 자료입니다.

- [Microsoft Fabric GA 발표](https://aka.ms/Fabric-Hero-Blog-Ignite23) 전문을 블로그 포스트로 읽기

- [가이드 투어](https://aka.ms/Fabric-GuidedTour)로 Fabric 탐색

- [Microsoft Fabric 무료 평가판](https://aka.ms/try-fabric) 신청

- [Microsoft Fabric 웹사이트](https://aka.ms/microsoft-fabric) 방문

- [Fabric 학습 모듈](https://aka.ms/learn-fabric)을 탐색해서 새로운 기술 익히기

- [Fabric 기술 문서](https://aka.ms/fabric-docs) 검토

- [Fabric 시작하기 무료 e북](https://aka.ms/fabric-get-started-ebook) 읽기

- [Fabric 커뮤니티](https://aka.ms/fabric-community)에 가입하여 질문을 게시하고 피드백을 공유하며 다른 사람들로부터 배우기

더 많은 심층 Fabric 환경 발표 블로그 포스트 읽기:

- [Fabric 블로그의 Data Factory 환경](https://aka.ms/Fabric-Data-Factory-Blog) 

- [Fabric 블로그의 Synapse Data Engineering 환경](https://aka.ms/Fabric-DE-Blog) 

-  [Fabric 블로그의 Synapse Data Science 환경](https://aka.ms/Fabric-DS-Blog) 

- [Fabric 블로그의 Synapse Data Warehousing 환경](https://aka.ms/Fabric-DW-Blog) 

- [Fabric 블로그의 Synapse Real-Time Analytics 환경](https://aka.ms/Fabric-RTA-Blog)

- [Power BI 발표 블로그](https://aka.ms/Fabric-PBI-Blog)

- [Fabric 블로그의 Data Activator 환경](https://aka.ms/Fabric-DA-Blog) 

- [Fabric 블로그의 관리 및 거버넌스](https://aka.ms/Fabric-Admin-Gov-Blog)

- [Fabric 블로그의 OneLake](https://aka.ms/Fabric-OneLake-Blog)

- [Dataverse 및 Microsoft Fabric 통합 블로그](https://aka.ms/Dataverse-Fabric-Blog)

© 2023 Microsoft Corporation. All rights reserved.

이 데모/랩을 사용하면 다음 조건에 동의하게 됩니다.

이 데모/랩에 설명된 기술/기능은 학습 환경을 제공하고 사용자 의견을 얻기 위해 Microsoft Corporation에서 제공합니다. 데모/랩을 통해서만 이러한 기술적 특성과 기능을 평가하고 사용자 의견을 Microsoft에 제시할 수 있습니다. 다른 용도로는 사용할 수 없습니다. 이 데모/랩 또는 그 일부에 대해 수정, 복사, 배포, 전송, 표시, 수행, 재현, 게시, 라이선스 허여, 파생 작업 생성, 양도 또는 판매할 수 없습니다.

추가 복제 또는 재배포를 위한 다른 서버 또는 위치에 대한 데모/랩(또는 그 일부)의 복사 또는 재현은 명시적으로 금지됩니다.

이 데모/랩은 위에서 명시한 목적을 위해 복잡한 설정 또는 설치가 없는 시뮬레이션된 환경에서 잠재적인 새로운 기능과 개념을 포함하여 특정 소프트웨어 기술/제품의 특성 및 기능을 제공합니다. 이 데모/랩에서 서술된 기술/개념은 전체 기능을 나타내지 않을 수 있으며, 최종 버전이 작동하지 않을 수도 있습니다. 또한 해당 기능 또는 개념의 최종 버전을 릴리스하지 않을 수도 있습니다. 또한 실제 환경에서 이러한 특성과 기능을 사용한 경험이 다를 수도 있습니다.

**피드백**. 이 데모/랩에서 서술된 기술적 특성, 기능 및/또는 개념에 대한 사용자 의견을 Microsoft에 제시하면 Microsoft는 이 사용자 의견을 어떤 방식과 목적으로든 무료로 사용, 공유 및 상용화할 수 있습니다. 또한 제품, 기술 및 서비스에서 사용자 의견이 포함된 Microsoft 소프트웨어 또는 서비스의 특정 부분을 사용하거나 인터페이스하는 데 필요한 모든 특허권을 제3자에게 무료로 제공합니다. Microsoft에서 사용자 의견을 포함하기 때문에 Microsoft에서 해당 소프트웨어 또는 설명서의 사용을 인가해야 하는 라이선스에 종속된 사용자 의견은 제공할 수 없습니다. 이러한 권리는 본 계약에 의거하여 유효합니다.

Microsoft Corporation은 이에 따라 명시적, 묵시적 또는 법적 특정 목적에의 적합성, 권리 및 비침해 여부에 관계없이 모든 보증과 조건을 포함하여 데모/랩과 관련된 모든 보증 및 조건을 부인합니다. Microsoft는 어떤 목적으로든 결과의 정확성, 데모/랩의 사용으로 파생된 출력 또는 데모/랩에 포함된 정보의 적합성과 관련하여 어떠한 보증이나 진술도 하지 않습니다.

**고지 사항**

이 데모/랩에는 Microsoft Power BI의 새로운 기능 및 향상된 기능 중 일부만 포함되어 있습니다. 일부 기능은 제품의 향후 릴리스에서 변경될 수 있습니다. 이 데모/랩에서는 새로운 기능 모두가 아닌 일부에 대해 학습하게 됩니다.


